---
phase: 05-command-parser-text-symbols
plan: 03
type: execute
wave: 3
depends_on: ["05-02"]
files_modified: []
autonomous: false

must_haves:
  truths:
    - "User says 'punto' and '.' appears at cursor on PC"
    - "User says 'coma dos puntos enter' and ',: ' appears (mixed commands work)"
    - "User says 'arroba ejemplo punto com' and '@ejemplo.com' appears"
    - "Command detection is case-insensitive"
    - "User says 'espacio' and explicit space is inserted"
    - "User says 'literal punto' and 'punto' appears (not '.')"
  artifacts: []
  key_links: []
---

<objective>
Verify the complete command parser flow works end-to-end on a real Android device.

Purpose: Confirm that voice commands convert correctly in real-time and the full flow (mobile -> backend -> agent -> paste) works with parsed text.

Output: Verified working system, ready for Phase 5 completion.
</objective>

<execution_context>
@C:\Users\luish\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\luish\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/05-command-parser-text-symbols/05-CONTEXT.md
@.planning/phases/05-command-parser-text-symbols/05-02-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Build and deploy to Android device</name>
  <files></files>
  <action>
    Build the mobile app and sync to Android:

    ```bash
    cd mobile-app
    npm run build
    npx cap sync android
    ```

    Open Android Studio project:
    ```bash
    npx cap open android
    ```

    Build and run on connected Android device via Android Studio.

    Ensure backend is running on the network:
    ```bash
    cd backend && npm run dev
    ```

    Ensure Windows agent is running:
    ```bash
    cd windows-agent && npm run dev
    ```
  </action>
  <verify>
    - Mobile app launches on Android device
    - App connects to backend (device list shows)
    - Windows agent is connected
  </verify>
  <done>
    - Latest code deployed to Android device
    - Full system (backend + agent + mobile) running
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Task 2: Verify command parser end-to-end</name>
  <what-built>
    Command parser that converts Spanish voice commands to punctuation/symbols in real-time.
  </what-built>
  <how-to-verify>
    Test each category of commands on the Android device:

    **1. Basic Punctuation:**
    - Say "hola punto adios" -> should see "hola. adios" in live text
    - Say "uno coma dos coma tres" -> should see "uno, dos, tres"
    - Say "que dos puntos esto" -> should see "que: esto"
    - Say "lista punto y coma item" -> should see "lista; item"

    **2. Interrogation/Exclamation:**
    - Say "que interrogacion" -> should see "que?"
    - Say "hola exclamacion" -> should see "hola!"

    **3. Symbols:**
    - Say "correo arroba ejemplo punto com" -> should see "correo @ejemplo.com"
    - Say "hashtag tema" -> should see "#tema"
    - Say "costo dolar cien" -> should see "costo $cien"

    **4. Paired Symbols:**
    - Say "abre parentesis nota cierra parentesis" -> should see "(nota)"
    - Say "abre comillas hola cierra comillas" -> should see '"hola"'

    **5. Escape Mechanism:**
    - Say "literal punto" -> should see the word "punto" not "."
    - Say "literal coma y luego coma" -> should see "coma y luego,"

    **6. Case Insensitivity:**
    - Speak naturally - command words should work regardless of how Android capitalizes

    **7. Word Boundaries:**
    - Say "contrapunto" -> should stay as "contrapunto" (not "contra.")

    **8. Full E2E Flow:**
    - Select Windows PC as target
    - Say a test phrase with commands
    - Verify the PARSED text appears at cursor on Windows

    **9. Visual Feedback:**
    - When speaking commands, observe brief highlight/pulse when symbols appear

    **10. Space Normalization:**
    - Say "hola punto adios" -> spaces should be correct: "hola. adios" (no double spaces)
  </how-to-verify>
  <resume-signal>
    Type "approved" if all tests pass.
    If issues found, describe what failed and expected vs actual behavior.
  </resume-signal>
</task>

</tasks>

<verification>
Human verification of all command categories working end-to-end.
</verification>

<success_criteria>
All success criteria from ROADMAP Phase 5:
1. User says "punto" and "." appears in transcription at cursor position
2. User says "coma dos puntos enter" and ",:" appears (mixed commands work - note: "enter" is Phase 6)
3. User says "arroba ejemplo punto com" and "@ejemplo.com" appears
4. Command detection is case-insensitive
5. User says "espacio" and explicit space is inserted
</success_criteria>

<output>
After completion, create `.planning/phases/05-command-parser-text-symbols/05-03-SUMMARY.md`
</output>
